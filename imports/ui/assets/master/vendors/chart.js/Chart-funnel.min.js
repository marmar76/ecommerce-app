/**
 * Minified by jsDelivr using UglifyJS v3.0.24.
 * Original file: /npm/funnel-chart@1.1.1/src/funnel-chart.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
 !function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.FunnelChart=e()}(this,function(){function t(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]);return t}function e(i,n){if(!(this instanceof e))return new e(i,n);if(this.canvas="string"==typeof i?document.getElementById(i):i,!n.values||!n.values.length)throw"A values setting must be provided";this.settings=t(this.settings,n),this.initialize()}return e.prototype=t(e.prototype,{settings:{displayPercentageChange:!0,pPrecision:1,labelLineColor:"#eee",labelFontColor:"#657274",sectionColor:"#0498b3",pSectionColor:"#bfd1d4",font:"Helvetica Neue",maxFontSize:13,fontWeight:"300",sectionFontColor:"#fff",pSectionFontColor:"#657274",pSectionHeightPercent:100,labelWidthPercent:30,funnelReductionPercent:40,labelOffset:10,lineHeight:1},initialize:function(){this.calculateDimensions(),this.draw()},calculateDimensions:function(){var t,e,i,n=this.settings;this.width=this.canvas.offsetWidth,this.height=this.canvas.offsetHeight,this.createHiDPICanvas(),t=this.hasLabels()?this.width*(n.labelWidthPercent/100):0,this.labelMaxWidth=t-n.labelOffset,this.startWidth=this.width-t,this.endWidth=this.startWidth*(n.funnelReductionPercent/100),e=this.height/n.values.length,n.displayPercentageChange?(e=this.height/n.values.length,i=this.height/(this.height-e/(100+n.pSectionHeightPercent)*n.pSectionHeightPercent),this.sectionHeight=i*(e/(100+n.pSectionHeightPercent)*100),this.pSectionHeight=i*(e/(100+n.pSectionHeightPercent)*n.pSectionHeightPercent)):(this.sectionHeight=e,this.pSectionHeight=0)},pixelRatio:function(){var t=this.canvas.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},createHiDPICanvas:function(){var t=this.canvas,e=this.pixelRatio(),i=this.width,n=this.height;t.width=i*e,t.height=n*e,t.style.width=i+"px",t.style.height=n+"px",t.getContext("2d").setTransform(e,0,0,e,0,0)},draw:function(){var t=this.canvas,e=this.settings;if(t.getContext){var i=t.getContext("2d"),n=(e.displayPercentageChange?this.pSectionHeight:this.sectionHeight)-2;e.maxFontSize>=n&&(e.maxFontSize=n),i.font=e.fontWeight+" "+e.maxFontSize+"px "+e.font,this.hasLabels()&&this.drawLabels(i),this.drawClippingArea(i,e),i.fillStyle="#fff",i.fill(),i.clip(),this.drawSections(i),this.drawClippingArea(i,e,!0),i.lineWidth=2,i.strokeStyle="#fff",i.stroke()}},drawLabels:function(t){var e,i,n=this.settings;for(t.strokeStyle=n.labelLineColor,t.lineWidth=n.lineHeight,e=0;e<n.values.length;e++)i=this.calculateYPos(e)-1,t.fillStyle=this.sequentialValue(n.labelFontColor,e),t.fillText(n.labels[e]||"",this.startWidth+n.labelOffset,i+this.sectionHeight/2+n.maxFontSize/2-2,this.labelMaxWidth),e>0&&(t.beginPath(),t.moveTo(e,i),t.lineTo(this.width,i),t.stroke()),e<n.values.length-1&&n.displayPercentageChange&&(t.beginPath(),t.moveTo(e,i+this.sectionHeight),t.lineTo(this.width,i+this.sectionHeight),t.stroke())},drawClippingArea:function(t,e,i){var n=(this.startWidth-this.endWidth)/2,s=e.values.length*this.sectionHeight+(e.values.length-1)*this.pSectionHeight+(e.values.length+1),h=i?"moveTo":"lineTo";t.beginPath(),t.moveTo(0,0),t[h](this.startWidth,0),t.quadraticCurveTo(this.startWidth-n,s/3,this.startWidth-n,s),t[h](n,s),t.quadraticCurveTo(n,s/3,0,0)},drawSections:function(t){var e,i,n=this.settings;for(t.textAlign="center",e=0;e<n.values.length;e++)i=this.calculateYPos(e),t.fillStyle=this.sequentialValue(n.sectionColor,e),t.fillRect(0,i,this.startWidth,this.sectionHeight-n.lineHeight),t.fillStyle=this.sequentialValue(n.sectionFontColor,e),t.fillText(n.values[e],this.startWidth/2,i+(this.sectionHeight-n.lineHeight)/2+n.maxFontSize/2-2),e<n.values.length-1&&n.displayPercentageChange&&(t.fillStyle=this.sequentialValue(n.pSectionColor,e),t.fillRect(0,i+this.sectionHeight,this.startWidth,this.pSectionHeight-n.lineHeight),t.fillStyle=this.sequentialValue(n.pSectionFontColor,e),t.fillText(0===n.values[e]?"":(n.values[e+1]/n.values[e]*100).toFixed(n.pPrecision)+"%",this.startWidth/2,i+this.sectionHeight+(this.pSectionHeight-n.lineHeight)/2+n.maxFontSize/2-1))},hasLabels:function(){var t=this.settings.labels;return t&&!!t.length},calculateYPos:function(t){var e=this.sectionHeight;return this.settings.displayPercentageChange&&(e+=this.pSectionHeight),e*t},sequentialValue:function(t,e){return"string"==typeof t?t:t[e%t.length]}}),e});
 //# sourceMappingURL=/sm/e977a1164de473875cfe7d167780fe2ccb2f567d0fac3bcd671731edf23f303d.map